Each lock is represented by a znode. If a client wishes to hold a lock, they create the designated node with the EPHEMERAL flag. If the create succeeds, they hold the lock. Otherwise, the client can read the znode with the watch flag set to be notified if the current leader dies. Clients have sessions and they send heartbeats to ZK, and if it stops receiving heartbeats, then ZK knows the client has failed. 